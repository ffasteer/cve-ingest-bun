function test() {
  const start = new Date('01-01-2022');
  const end = new Date('01-01-2023');
  for (const i of getDateChunks(start, end, 30)) {
    console.log(i);
  }
}

export function* getDateChunks(start: Date, end: Date, maxDays: number) {
  // Copy start so don't affect original
  const s = new Date(start);
  while (s < end) {
    // Create a new date for the block end that is s + maxDays
    const e = new Date(s.getFullYear(), s.getMonth(), s.getDate() + maxDays);
    // Push into an array. If block end is beyond end date, use a copy of end date
    yield [new Date(s), e <= end? e : new Date(end)];
    // Increment s to the start of the next block which is one day after 
    // the current block end
    s.setDate(s.getDate() + maxDays);
  }
}

// test();
